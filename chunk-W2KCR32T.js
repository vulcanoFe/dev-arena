import{a as b,b as oe,c as se,d as ae,e as le}from"./chunk-P7RXNBX6.js";import{g as k}from"./chunk-XN64DOPG.js";import{$a as B,B as Z,Ca as p,Da as G,Db as N,J as X,L as Y,Ma as d,Na as u,P as j,Pa as A,Qa as w,R as K,Ra as x,Sa as J,T as c,Ta as _,Ua as v,Va as ee,Wa as s,Xa as r,Y as D,Ya as te,Z as E,Za as M,_a as ie,a as L,ab as S,b as $,bb as l,fb as F,ga as f,gb as a,h as W,hb as ne,ib as h,l as q,lb as y,mb as C,q as z,qb as U,rb as m,sa as o,sb as I,ub as re,y as Q}from"./chunk-56RWGN7N.js";var he={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},st=$(L({},he),{"[class.ng-submitted]":"isSubmitted"});var fe=new K("",{providedIn:"root",factory:()=>de}),de="always";var pe=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=G({type:t});static \u0275inj=j({})}return t})();var ue=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:fe,useValue:e.callSetDisabledState??de}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=G({type:t});static \u0275inj=j({imports:[pe]})}return t})();function me(t,i){if(t&1&&(s(0,"span",8),a(1),y(2,"cryptoPercent"),r()),t&2){let e=l(2);F("bg-green-100",e.isPositive())("text-green-700",e.isPositive())("bg-red-100",e.isNegative())("text-red-700",e.isNegative())("dark:bg-green-900",e.isPositive())("dark:text-green-300",e.isPositive())("dark:bg-red-900",e.isNegative())("dark:text-red-300",e.isNegative()),o(),h(" ",C(2,17,e.priceChange())," ")}}function ge(t,i){if(t&1&&(s(0,"div",10)(1,"div",11)(2,"span",12),a(3,"24h High:"),r(),s(4,"span",13),a(5),y(6,"cryptoPrice"),r()(),s(7,"div",11)(8,"span",12),a(9,"24h Low:"),r(),s(10,"span",13),a(11),y(12,"cryptoPrice"),r()()()),t&2){let e=l(3);o(5),h(" $",C(6,2,e.ticker().highPrice)," "),o(6),h(" $",C(12,4,e.ticker().lowPrice)," ")}}function _e(t,i){if(t&1&&(s(0,"div",6)(1,"div",9),a(2),y(3,"cryptoPrice"),r(),d(4,ge,13,6,"div",10),r()),t&2){let e=l(2);o(2),h(" $",C(3,2,e.currentPrice())," "),o(2),u(e.ticker()?4:-1)}}function ve(t,i){t&1&&(s(0,"div",7),te(1,"div",14),r())}function ye(t,i){if(t&1&&(s(0,"div",2)(1,"div",3)(2,"h3",4),a(3),y(4,"cryptoSymbol"),r(),d(5,me,3,19,"span",5),r(),d(6,_e,5,4,"div",6)(7,ve,2,0,"div",7),r()),t&2){let e=l();F("border-green-500",e.isPositive())("border-red-500",e.isNegative())("border-slate-200",!e.isPositive()&&!e.isNegative())("dark:border-green-600",e.isPositive())("dark:border-red-600",e.isNegative())("dark:border-slate-700",!e.isPositive()&&!e.isNegative()),o(3),h(" ",C(4,15,e.symbol())," "),o(2),u(e.priceChange()?5:-1),o(),u(e.currentPrice()?6:7)}}function Ce(t,i){if(t&1&&(s(0,"div",1)(1,"p",15),a(2),r()()),t&2){let e=l();o(2),h(" Errore nel caricamento di ",e.symbol()," ")}}var P=class t{binanceService=c(b);symbol=re.required();priceData=f(null);hasError=f(!1);subscription;currentSymbol="";currentPrice=m(()=>this.priceData()?.price);ticker=m(()=>this.priceData()?.ticker);showCard=m(()=>!this.hasError()&&this.symbol().length>0);priceChange=m(()=>{let i=this.ticker();return i?parseFloat(i.priceChangePercent):null});isPositive=m(()=>(this.priceChange()||0)>0);isNegative=m(()=>(this.priceChange()||0)<0);constructor(){I(()=>{let i=this.symbol();i!==this.currentSymbol&&U(()=>{if(!i){this.hasError.set(!0);return}this.subscription&&this.subscription.unsubscribe(),this.currentSymbol&&this.binanceService.disconnect(this.currentSymbol),this.currentSymbol=i,this.hasError.set(!1),this.subscription=z([this.binanceService.connect(i),this.binanceService.getTicker(i)]).subscribe({next:([e,n])=>{this.priceData.set({price:e,ticker:n})},error:e=>{console.error(`Errore per ${i}:`,e),this.hasError.set(!0)}})})})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.currentSymbol&&this.binanceService.disconnect(this.currentSymbol)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-crypto-card"]],inputs:{symbol:[1,"symbol"]},decls:2,vars:1,consts:[[1,"rounded-xl","border-2","bg-white","p-6","transition-all","duration-300","hover:-translate-y-1","hover:shadow-xl","dark:bg-slate-800",3,"border-green-500","border-red-500","border-slate-200","dark:border-green-600","dark:border-red-600","dark:border-slate-700"],[1,"rounded-xl","border-2","border-red-300","bg-red-50","p-6","dark:border-red-800","dark:bg-red-950"],[1,"rounded-xl","border-2","bg-white","p-6","transition-all","duration-300","hover:-translate-y-1","hover:shadow-xl","dark:bg-slate-800"],[1,"mb-4","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-slate-900","dark:text-slate-100"],[1,"rounded-lg","px-3","py-1","text-sm","font-semibold",3,"bg-green-100","text-green-700","bg-red-100","text-red-700","dark:bg-green-900","dark:text-green-300","dark:bg-red-900","dark:text-red-300"],[1,"space-y-4"],[1,"flex","items-center","justify-center","py-8"],[1,"rounded-lg","px-3","py-1","text-sm","font-semibold"],[1,"text-3xl","font-bold","text-slate-900","dark:text-slate-100"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-slate-600","dark:text-slate-400"],[1,"font-semibold","text-slate-900","dark:text-slate-100"],[1,"h-8","w-8","animate-spin","rounded-full","border-b-2","border-blue-600","dark:border-blue-400"],[1,"text-center","text-red-700","dark:text-red-300"]],template:function(e,n){e&1&&d(0,ye,8,17,"div",0)(1,Ce,3,1,"div",1),e&2&&u(n.showCard()?0:n.hasError()?1:-1)},dependencies:[N,oe,se,ae],encapsulation:2})};function be(t,i){if(t&1){let e=M();_(0,"app-crypto-card",3),B("click",function(){let g=D(e).$implicit,V=l();return E(V.navigateToDetail(g))}),v()}if(t&2){let e=i.$implicit;J("symbol",e)}}var R=class t{binanceService=c(b);router=c(k);popularCryptos=this.binanceService.popularCryptos;navigateToDetail(i){this.router.navigate(["/crypto-stats",i])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-popular-cryptos"]],decls:6,vars:0,consts:[[1,"my-6","text-2xl","font-bold"],[1,"grid","grid-cols-1","gap-6","md:grid-cols-2","lg:grid-cols-3"],[1,"cursor-pointer",3,"symbol"],[1,"cursor-pointer",3,"click","symbol"]],template:function(e,n){e&1&&(_(0,"section")(1,"h2",0),a(2," Crypto pi\xF9 popolari "),v(),_(3,"div",1),w(4,be,1,1,"app-crypto-card",2,A),v()()),e&2&&(o(4),x(n.popularCryptos))},dependencies:[P],encapsulation:2})};function Ve(t,i){if(t&1){let e=M();s(0,"button",5),S("click",function(){D(e);let g=l();return E(g.clearSearch())}),a(1," \xD7 "),r()}}function De(t,i){t&1&&(s(0,"div",3),a(1," Ricerca in corso... "),r())}function Ee(t,i){if(t&1){let e=M();s(0,"div",9),S("click",function(){let g=D(e).$implicit,V=l(2);return E(V.navigateToDetail(g))}),s(1,"span",10),a(2),r(),s(3,"span",11),a(4,"\u2192"),r()()}if(t&2){let e=i.$implicit;o(2),ne(e)}}function Me(t,i){if(t&1&&(s(0,"section")(1,"h2",6),a(2," Risultati della ricerca "),r(),s(3,"div",7),w(4,Ee,5,1,"div",8,A),r()()),t&2){let e=l();o(4),x(e.searchResults())}}function Ae(t,i){if(t&1&&(s(0,"div",4)(1,"p",12),a(2),r()()),t&2){let e=l();o(2),h(' Nessun risultato trovato per "',e.searchQuery(),'" ')}}var T=class t{binanceService=c(b);router=c(k);searchQuery=f("");isSearching=f(!1);searched=f(!1);searchSubject=new W;searchResults=le(this.searchSubject.pipe(Q(300),Z(),X(i=>!i||i.length<2?(this.isSearching.set(!1),this.searched.set(!1),q([])):(this.searched.set(!1),this.isSearching.set(!0),this.binanceService.searchCryptos(i))),Y(()=>{this.isSearching.set(!1),this.searchQuery().length>=2&&this.searched.set(!0)})),{initialValue:[]});constructor(){I(()=>{let i=this.searchQuery();this.searchSubject.next(i),i||this.isSearching.set(!1)})}onSearch(i){this.searchQuery.set(i)}navigateToDetail(i){this.router.navigate(["/crypto-stats",i])}clearSearch(){this.searchQuery.set("")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-search-crypto"]],decls:6,vars:5,consts:[[1,"relative"],["type","text","placeholder","Cerca una crypto (es. BTC, ETH)...",1,"w-full","rounded-xl","border-2","border-slate-200","bg-white","px-4","py-3","pr-12","text-lg","transition-all","focus:border-blue-500","focus:outline-none","focus:ring-2","focus:ring-blue-200","dark:border-slate-700","dark:bg-slate-800","dark:text-slate-100","dark:focus:border-blue-400","dark:focus:ring-blue-800",3,"input","value"],[1,"absolute","right-2","top-1/2","flex","h-8","w-8","-translate-y-1/2","items-center","justify-center","rounded-full","bg-red-500","text-white","transition-colors","hover:bg-red-600","dark:bg-red-600","dark:hover:bg-red-700"],[1,"mt-3","text-center","text-slate-500","dark:text-slate-400"],[1,"py-12","text-center"],[1,"absolute","right-2","top-1/2","flex","h-8","w-8","-translate-y-1/2","items-center","justify-center","rounded-full","bg-red-500","text-white","transition-colors","hover:bg-red-600","dark:bg-red-600","dark:hover:bg-red-700",3,"click"],[1,"my-4","text-2xl","font-bold"],[1,"space-y-2"],[1,"flex","cursor-pointer","items-center","justify-between","rounded-lg","border-2","border-slate-200","bg-white","p-4","transition-all","hover:translate-x-1","hover:border-blue-500","dark:border-slate-700","dark:bg-slate-800","dark:hover:border-blue-400"],[1,"flex","cursor-pointer","items-center","justify-between","rounded-lg","border-2","border-slate-200","bg-white","p-4","transition-all","hover:translate-x-1","hover:border-blue-500","dark:border-slate-700","dark:bg-slate-800","dark:hover:border-blue-400",3,"click"],[1,"font-semibold"],[1,"text-xl"],[1,"text-lg","text-slate-500"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"input",1),S("input",function(V){return n.onSearch(V.target.value)}),r(),d(2,Ve,2,0,"button",2),r(),d(3,De,2,0,"div",3),d(4,Me,6,0,"section"),d(5,Ae,3,1,"div",4)),e&2&&(o(),ie("value",n.searchQuery()),o(),u(n.searchQuery()?2:-1),o(),u(n.isSearching()?3:-1),o(),u(n.searchResults().length>0?4:-1),o(),u(n.searchResults().length===0&&!n.isSearching()&&n.searched()?5:-1))},encapsulation:2})};var ce=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"flex","min-h-full","w-full","flex-col","items-center","justify-center"],[1,"w-full","max-w-6xl","space-y-8"]],template:function(e,n){e&1&&(_(0,"div",0)(1,"div",1),ee(2,"app-search-crypto")(3,"app-popular-cryptos"),v()())},dependencies:[N,ue,R,T],encapsulation:2})};export{ce as CryptoStatsComponent};
