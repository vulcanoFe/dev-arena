<div class="flex min-h-full w-full flex-col items-center justify-start py-8">
  <div class="w-full max-w-5xl space-y-6">
    
    <!-- Back Button -->
    <button 
      (click)="goBack()"
      class="rounded-lg border-2 border-slate-200 bg-white px-6 py-2 font-semibold transition-all hover:border-blue-500 hover:text-blue-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100 dark:hover:border-blue-400 dark:hover:text-blue-400"
    >
      ‚Üê Indietro
    </button>

    @if (currentPrice() !== undefined && currentPrice() !== null && ticker()) {
      <div class="space-y-6">
        
        <!-- Header with Price -->
        <div class="rounded-xl border-2 border-slate-200 bg-white p-8 dark:border-slate-700 dark:bg-slate-800">
          <h1 class="mb-4 text-4xl font-extrabold text-slate-900 dark:text-slate-100">
            {{ symbol() | cryptoSymbol }}
          </h1>
          <div class="flex items-baseline gap-4">
            <span class="text-5xl font-bold text-slate-900 dark:text-slate-100">
              ${{ currentPrice() | cryptoPrice }}
            </span>
            <span 
              class="rounded-lg px-4 py-2 text-xl font-semibold"
              [class.bg-green-100]="isPositive()"
              [class.text-green-700]="isPositive()"
              [class.bg-red-100]="isNegative()"
              [class.text-red-700]="isNegative()"
              [class.dark:bg-green-900]="isPositive()"
              [class.dark:text-green-300]="isPositive()"
              [class.dark:bg-red-900]="isNegative()"
              [class.dark:text-red-300]="isNegative()"
            >
              {{ priceChange() | cryptoPercent }}
            </span>
          </div>
        </div>

        <!-- Real-time Chart -->
        <div class="rounded-xl border-2 border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800">
          <h3 class="mb-4 text-lg font-semibold text-slate-900 dark:text-slate-100">
            Andamento Real-time
          </h3>
          <div class="h-40">
            <svg viewBox="0 0 500 100" class="h-full w-full">
              @if (priceHistory().length > 1) {
                <polyline
                  [attr.points]="getChartPoints()"
                  fill="none"
                  [attr.stroke]="isPositive() ? '#10b981' : '#ef4444'"
                  stroke-width="2"
                />
              }
            </svg>
          </div>
        </div>

        <!-- 24h Stats Grid -->
        <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
          <div class="rounded-xl border-2 border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800">
            <div class="mb-2 text-sm text-slate-600 dark:text-slate-400">Massimo 24h</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-slate-100">
              ${{ highPrice() | cryptoPrice }}
            </div>
          </div>

          <div class="rounded-xl border-2 border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800">
            <div class="mb-2 text-sm text-slate-600 dark:text-slate-400">Minimo 24h</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-slate-100">
              ${{ lowPrice() | cryptoPrice }}
            </div>
          </div>

          <div class="rounded-xl border-2 border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800">
            <div class="mb-2 text-sm text-slate-600 dark:text-slate-400">Volume 24h</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-slate-100">
              {{ volume24h() | cryptoVolume }}
            </div>
          </div>
        </div>

        <!-- Price Range -->
        <div class="rounded-xl border-2 border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800">
          <div class="mb-4 text-sm text-slate-600 dark:text-slate-400">Range giornaliero</div>
          <div class="relative mb-2 h-2 rounded-full bg-slate-200 dark:bg-slate-700">
            <div 
              class="absolute h-full rounded-full bg-gradient-to-r from-red-500 to-green-500 transition-all"
              [style.width.%]="priceRange()"
            ></div>
            <div 
              class="absolute -top-1 h-4 w-4 rounded-full border-4 border-white bg-blue-600 shadow-lg transition-all dark:border-slate-800"
              [style.left.%]="priceRange()"
              style="transform: translateX(-50%)"
            ></div>
          </div>
          <div class="flex justify-between text-sm text-slate-600 dark:text-slate-400">
            <span>${{ lowPrice() | cryptoPrice }}</span>
            <span>${{ highPrice() | cryptoPrice }}</span>
          </div>
        </div>

        <!-- Details -->
        <div class="rounded-xl border-2 border-slate-200 bg-white p-6 dark:border-slate-700 dark:bg-slate-800">
          <h3 class="mb-4 text-lg font-semibold text-slate-900 dark:text-slate-100">
            Dettagli
          </h3>
          <div class="space-y-4">
            <div class="flex justify-between border-b border-slate-200 py-3 dark:border-slate-700">
              <span class="text-slate-600 dark:text-slate-400">Simbolo</span>
              <span class="font-semibold text-slate-900 dark:text-slate-100">{{ symbol() }}</span>
            </div>
            <div class="flex justify-between border-b border-slate-200 py-3 dark:border-slate-700">
              <span class="text-slate-600 dark:text-slate-400">Cambio 24h</span>
              <span 
                class="font-semibold"
                [class.text-green-600]="isPositive()"
                [class.text-red-600]="isNegative()"
                [class.dark:text-green-400]="isPositive()"
                [class.dark:text-red-400]="isNegative()"
              >
                {{ priceChange() | cryptoPercent }}
              </span>
            </div>
            <div class="flex justify-between py-3">
              <span class="text-slate-600 dark:text-slate-400">Ultimo aggiornamento</span>
              <span class="font-semibold text-slate-900 dark:text-slate-100">
                {{ lastUpdate() }}
              </span>
            </div>
          </div>
        </div>

      </div>
    } @else {
      <div class="flex flex-col items-center justify-center py-20">
        <div class="mb-4 h-16 w-16 animate-spin rounded-full border-b-4 border-blue-600 dark:border-blue-400"></div>
        <p class="text-lg text-slate-600 dark:text-slate-400">Caricamento dati...</p>
      </div>
    }
    
  </div>
</div>